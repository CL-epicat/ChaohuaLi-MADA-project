# Overview

This is for the MADA data analysis project/paper done with R/Quarto/Github. 

# Pre-requisites

This project was done using R, Quarto, Github and a reference manager that can handle bibtex (I used Zotero). 

# Structure

* All data goes into the subfolders inside the `data` folder.
* All code goes into the `R` folder or subfolders.
* All results (figures, tables, computed values) go into `results` folder or subfolders.
* All products (manuscripts, supplement) go into `products` subfolders.
* The `renv` folder is automatically generated by the `renv` package, and is
used to keep track of packages.
* See the various `README.md` files in those folders for some more information.

# Description of folders and codes 

* There are several datasets in the `raw-data` folder which are raw data from different sources. Codebooks are also provided. 
* The `processing_code` folder contains several files that load the raw datasets, merge them into a single dataset and perform a bit of cleaning, and save the final dataset in the `processed-data` folder. 
* The `eda-code` folder contains codes that load processed data, do an exploratory analysis, 
generate some figures and tables for the variables of interest. The tables and figures 
are saved in the 'result' folder.
* The `analysis_code` folder contains a file that load the processed data, do bivariate analysis, and fit models. This file produce figures and some numeric output (tables), which are saved to the `results` folder.
* The `results` folder contains code output, including figures and tables saved as serialized R data (`.Rds`) files.
* The `assets` folder contains static assets like pre-generated schematics from BioRender, bibtex files, csl files, and PDFs of references. These assets are not code-based and are not generated by code.
* The `products` folder contains final deliverables, like the manuscript and the supplement.
  * The  `manuscript` folder contains a report written as Quarto file. There is also a folder containing a Quarto file for supplementary materials.

* The `renv` folder is automatically generated by the `renv` package and you
should never edit it manually. This folder is used to store information about
the packages you are using in your project.
* There are multiple special files in the repo.
  * `README.md`: this file contains instructions or details about the folder it
  is located in. You are reading the project-level `README.md` file right now.
  * `renv.lock`: a special file in JSON format used to keep a log of which
  packages and versions your project uses.
  * `.gitignore`: this file gives instructions to the version control system,
  Git, and tells it which files we do not need to record versions of. Usually
  these are various files containing local settings.
  * `.Rprofile`: whenever you restart the R session, R will source (run all
  code in) this script. Right now this is used by `renv` to make sure we have
  the correct packages and versions installed.


# Getting started

Once you got this repository, first run the processing code, which will produce the processed data that is ready for analysis. Then run the eda.qmd, which will take the processed data and produce some exploratory analysis results. Then you can run the manuscript.qmd which will pull in the generated main results and display them in a manuscript. These files also pull in references from the `bibtex` file and format them according to the CSL style.

You can read about keeping track of projects with `renv`
[here](https://rstudio.github.io/renv/articles/renv.html).
Basically, whenever you install new packages or update old packages, you need
to run `renv::snapshot()` to update the `renv.lock` file, which is a list of
packages and versions that the package uses. When you open the R project on a
new computer, you can run `renv::restore()` to reinstall all the packages that
you recorded in the `renv.lock` file.


